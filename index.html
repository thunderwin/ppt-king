<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/black.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">
		
		<!-- è‡ªå®šä¹‰æ˜Ÿæ˜Ÿç‰¹æ•ˆæ ·å¼ -->
		<style>
			/* æ˜Ÿæ˜Ÿå®¹å™¨ - å°±åƒæ˜¯æˆ‘ä»¬çš„æ˜Ÿç©ºç”»å¸ƒ */
			.stars-container {
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				pointer-events: none; /* è®©æ˜Ÿæ˜Ÿä¸ä¼šæŒ¡ä½æˆ‘ä»¬ç‚¹å‡»å¹»ç¯ç‰‡ */
				z-index: 1; /* ç¡®ä¿æ˜Ÿæ˜Ÿåœ¨èƒŒæ™¯ä¸Šï¼Œä½†ä¸ä¼šç›–ä½å†…å®¹ */
				overflow: hidden;
			}
			
			/* å•ä¸ªæ˜Ÿæ˜Ÿçš„æ ·å¼ */
			.star {
				position: absolute;
				background: white;
				border-radius: 50%;
				animation: fall linear infinite;
				opacity: 0.8;
			}
			
			/* æ˜Ÿæ˜Ÿé™è½åŠ¨ç”» - å°±åƒé›ªèŠ±é£˜è½ä¸€æ · */
			@keyframes fall {
				0% {
					transform: translateY(-100px) rotate(0deg);
					opacity: 1;
				}
				100% {
					transform: translateY(calc(100vh + 100px)) rotate(360deg);
					opacity: 0;
				}
			}
			
			/* è®©reveal.jsçš„å†…å®¹å±‚çº§æ›´é«˜ */
			.reveal {
				position: relative;
				z-index: 10;
			}
			
			/* æ‘„åƒå¤´çª—å£æ ·å¼ - æˆ‘ä»¬çš„é­”æ³•é•œå­ */
			.camera-container {
				position: fixed;
				bottom: 20px;
				left: 20px;
				width: 200px;
				height: 150px;
				background: #000;
				border: 3px solid #333;
				border-radius: 10px;
				overflow: hidden;
				z-index: 1000;
				transition: all 0.3s ease;
				box-shadow: 0 4px 20px rgba(0,0,0,0.5);
			}
			
			/* æ”¾å¤§çŠ¶æ€çš„æ‘„åƒå¤´çª—å£ */
			.camera-container.enlarged {
				width: 400px;
				height: 300px;
				bottom: 50px;
				left: 50px;
			}
			
			/* æ‘„åƒå¤´è§†é¢‘å…ƒç´  */
			.camera-video {
				width: 100%;
				height: 100%;
				object-fit: cover;
				border-radius: 7px;
				transition: all 0.3s ease;
				/* é»˜è®¤é•œåƒæ•ˆæœ - å°±åƒçœŸæ­£çš„é•œå­ */
				transform: scaleX(-1);
			}
			
			/* å–æ¶ˆé•œåƒæ•ˆæœ */
			.camera-video.no-mirror {
				transform: scaleX(1);
			}
			
			/* æ§åˆ¶æŒ‰é’®å®¹å™¨ - åªåœ¨hoveræ—¶æ˜¾ç¤º */
			.camera-controls {
				position: absolute;
				top: 5px;
				right: 5px;
				display: flex;
				gap: 5px;
				opacity: 0;
				transition: opacity 0.3s ease;
				pointer-events: none;
			}
			
			/* æ‘„åƒå¤´å®¹å™¨è¢«hoveræ—¶æ˜¾ç¤ºæ§åˆ¶æŒ‰é’® */
			.camera-container:hover .camera-controls {
				opacity: 1;
				pointer-events: auto;
			}
			
			/* æ§åˆ¶æŒ‰é’®æ ·å¼ */
			.control-btn {
				width: 25px;
				height: 25px;
				background: rgba(0,0,0,0.7);
				border: none;
				border-radius: 50%;
				color: white;
				cursor: pointer;
				font-size: 12px;
				display: flex;
				align-items: center;
				justify-content: center;
				transition: all 0.2s;
			}
			
			.control-btn:hover {
				background: rgba(0,0,0,0.9);
				transform: scale(1.1);
			}
			
			/* æ¿€æ´»çŠ¶æ€çš„æŒ‰é’® */
			.control-btn.active {
				background: #4CAF50;
			}
			
			/* éšè—çŠ¶æ€ */
			.camera-container.hidden {
				display: none;
			}
			
			/* å¯åŠ¨æ‘„åƒå¤´çš„æŒ‰é’® */
			.start-camera-btn {
				position: fixed;
				bottom: 20px;
				left: 20px;
				padding: 10px 15px;
				background: #4CAF50;
				color: white;
				border: none;
				border-radius: 5px;
				cursor: pointer;
				z-index: 1000;
				font-size: 14px;
				transition: background 0.3s;
			}
			
			.start-camera-btn:hover {
				background: #45a049;
			}
			
			.start-camera-btn.hidden {
				display: none;
			}
		</style>
	</head>
	<body>
		<!-- æ˜Ÿæ˜Ÿç‰¹æ•ˆå®¹å™¨ - æˆ‘ä»¬çš„é­”æ³•èˆå° -->
		<div class="stars-container" id="starsContainer"></div>
		
		<!-- å¯åŠ¨æ‘„åƒå¤´æŒ‰é’® -->
		<button class="start-camera-btn" id="startCameraBtn">ğŸ“· å¼€å¯æ‘„åƒå¤´</button>
		
		<!-- æ‘„åƒå¤´çª—å£ - æˆ‘ä»¬çš„é­”æ³•é•œå­ -->
		<div class="camera-container hidden" id="cameraContainer">
			<video class="camera-video" id="cameraVideo" autoplay muted></video>
			<div class="camera-controls">
				<button class="control-btn" id="enlargeBtn" title="æ”¾å¤§/ç¼©å°">â›¶</button>
				<button class="control-btn active" id="mirrorBtn" title="å–æ¶ˆé•œåƒ">ğŸª</button>
				<button class="control-btn" id="closeBtn" title="å…³é—­æ‘„åƒå¤´">âœ•</button>
			</div>
		</div>
		
		<div class="reveal">
			<div class="slides">
				<section>
					<h1>æ¬¢è¿æ¥åˆ°æ˜Ÿç©ºæ¼”ç¤º</h1>
					<p>çœ‹ï¼Œæ˜Ÿæ˜Ÿåœ¨ä¸ºæˆ‘ä»¬çš„æ¼”è®²å¢æ·»é­…åŠ›ï¼</p>
					<p>ç‚¹å‡»å·¦ä¸‹è§’çš„æŒ‰é’®å¼€å¯æ‘„åƒå¤´ï¼Œè®©è§‚ä¼—çœ‹åˆ°ä½ çš„ç²¾å½©è¡¨æƒ…ï¼</p>
				</section>
				<section>
					<h2>ç¬¬äºŒé¡µå¹»ç¯ç‰‡</h2>
					<p>æ˜Ÿæ˜Ÿè¿˜åœ¨ç»§ç»­é£˜è½å‘¢ï½</p>
					<p>æ‘„åƒå¤´çª—å£ä¼šå§‹ç»ˆè·Ÿéšä½ ï¼Œå°±åƒè´´å¿ƒçš„å°åŠ©æ‰‹ä¸€æ ·ï¼</p>
				</section>
			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			// åˆ›å»ºæ˜Ÿæ˜Ÿçš„é­”æ³•å‡½æ•°
			function createStar() {
				const star = document.createElement('div');
				star.className = 'star';
				
				// éšæœºè®¾ç½®æ˜Ÿæ˜Ÿçš„å¤§å° - æœ‰å¤§æœ‰å°ï¼Œå°±åƒçœŸçš„æ˜Ÿç©º
				const size = Math.random() * 4 + 2; // 2-6px
				star.style.width = size + 'px';
				star.style.height = size + 'px';
				
				// éšæœºè®¾ç½®æ˜Ÿæ˜Ÿçš„æ°´å¹³ä½ç½®
				star.style.left = Math.random() * 100 + '%';
				
				// éšæœºè®¾ç½®åŠ¨ç”»æŒç»­æ—¶é—´ - æœ‰äº›æ˜Ÿæ˜Ÿå¿«ï¼Œæœ‰äº›æ…¢
				const duration = Math.random() * 3 + 2; // 2-5ç§’
				star.style.animationDuration = duration + 's';
				
				// éšæœºå»¶è¿Ÿï¼Œè®©æ˜Ÿæ˜Ÿä¸æ˜¯åŒæ—¶å‡ºç°
				star.style.animationDelay = Math.random() * 2 + 's';
				
				return star;
			}
			
			// å¯åŠ¨æ˜Ÿæ˜Ÿé›¨çš„å‡½æ•°
			function startStarfall() {
				const container = document.getElementById('starsContainer');
				
				// å…ˆåˆ›å»º20é¢—æ˜Ÿæ˜Ÿ
				for (let i = 0; i < 20; i++) {
					container.appendChild(createStar());
				}
				
				// æ¯éš”ä¸€æ®µæ—¶é—´æ·»åŠ æ–°æ˜Ÿæ˜Ÿï¼Œç§»é™¤æ—§æ˜Ÿæ˜Ÿ
				setInterval(() => {
					// ç§»é™¤å·²ç»é£˜å‡ºå±å¹•çš„æ˜Ÿæ˜Ÿï¼Œé¿å…å†…å­˜å †ç§¯
					const stars = container.querySelectorAll('.star');
					if (stars.length > 50) { // æœ€å¤šä¿æŒ50é¢—æ˜Ÿæ˜Ÿ
						container.removeChild(stars[0]);
					}
					
					// æ·»åŠ æ–°æ˜Ÿæ˜Ÿ
					container.appendChild(createStar());
				}, 200); // æ¯200æ¯«ç§’æ·»åŠ ä¸€é¢—æ–°æ˜Ÿæ˜Ÿ
			}
			
			// æ‘„åƒå¤´ç›¸å…³çš„é­”æ³•å‡½æ•°ä»¬
			let cameraStream = null; // å­˜å‚¨æ‘„åƒå¤´æµï¼Œå°±åƒæ˜¯æˆ‘ä»¬çš„è§†é¢‘ç®¡é“
			let isEnlarged = false; // è®°å½•æ˜¯å¦å·²ç»æ”¾å¤§
			let isMirrored = true; // è®°å½•æ˜¯å¦é•œåƒï¼Œé»˜è®¤å¼€å¯
			
			// å¯åŠ¨æ‘„åƒå¤´çš„å‡½æ•° - å°±åƒæ‰“å¼€ä¸€æ‰‡çª—æˆ·
			async function startCamera() {
				try {
					// è¯·æ±‚è®¿é—®æ‘„åƒå¤´ - ç¤¼è²Œåœ°æ•²é—¨
					const stream = await navigator.mediaDevices.getUserMedia({
						video: {
							width: { ideal: 1280 },
							height: { ideal: 720 }
						},
						audio: false // æˆ‘ä»¬åªè¦è§†é¢‘ï¼Œä¸è¦å£°éŸ³
					});
					
					cameraStream = stream;
					const video = document.getElementById('cameraVideo');
					video.srcObject = stream;
					
					// æ˜¾ç¤ºæ‘„åƒå¤´çª—å£ï¼Œéšè—å¯åŠ¨æŒ‰é’®
					document.getElementById('cameraContainer').classList.remove('hidden');
					document.getElementById('startCameraBtn').classList.add('hidden');
					
					console.log('æ‘„åƒå¤´å¯åŠ¨æˆåŠŸï¼é»˜è®¤é•œåƒæ¨¡å¼ï¼Œå°±åƒé­”æ³•ä¸€æ ·ï½');
				} catch (error) {
					console.error('å“å‘€ï¼Œæ‘„åƒå¤´å¯åŠ¨å¤±è´¥äº†ï¼š', error);
					alert('æŠ±æ­‰ï¼Œæ— æ³•è®¿é—®æ‘„åƒå¤´ã€‚å¯èƒ½éœ€è¦æ‚¨å…è®¸ç½‘ç«™ä½¿ç”¨æ‘„åƒå¤´æƒé™å“¦ï¼');
				}
			}
			
			// å…³é—­æ‘„åƒå¤´çš„å‡½æ•° - å°±åƒå…³é—­çª—æˆ·
			function stopCamera() {
				if (cameraStream) {
					// åœæ­¢æ‰€æœ‰çš„è§†é¢‘è½¨é“
					cameraStream.getTracks().forEach(track => track.stop());
					cameraStream = null;
				}
				
				// éšè—æ‘„åƒå¤´çª—å£ï¼Œæ˜¾ç¤ºå¯åŠ¨æŒ‰é’®
				document.getElementById('cameraContainer').classList.add('hidden');
				document.getElementById('startCameraBtn').classList.remove('hidden');
				
				// é‡ç½®æ‰€æœ‰çŠ¶æ€
				isEnlarged = false;
				isMirrored = true; // é‡ç½®ä¸ºé»˜è®¤é•œåƒçŠ¶æ€
				document.getElementById('cameraContainer').classList.remove('enlarged');
				document.getElementById('cameraVideo').classList.remove('no-mirror');
				document.getElementById('mirrorBtn').classList.add('active');
				document.getElementById('mirrorBtn').title = 'å–æ¶ˆé•œåƒ';
				
				console.log('æ‘„åƒå¤´å·²å…³é—­ï¼ŒæœŸå¾…ä¸‹æ¬¡å†è§ï¼');
			}
			
			// åˆ‡æ¢æ”¾å¤§/ç¼©å°çš„å‡½æ•° - å°±åƒæ˜¯å˜ç„¦é•œå¤´
			function toggleEnlarge() {
				const container = document.getElementById('cameraContainer');
				isEnlarged = !isEnlarged;
				
				if (isEnlarged) {
					container.classList.add('enlarged');
					document.getElementById('enlargeBtn').textContent = 'â›¶';
					document.getElementById('enlargeBtn').title = 'ç¼©å°';
				} else {
					container.classList.remove('enlarged');
					document.getElementById('enlargeBtn').textContent = 'â›¶';
					document.getElementById('enlargeBtn').title = 'æ”¾å¤§';
				}
			}
			
			// åˆ‡æ¢é•œåƒæ•ˆæœçš„å‡½æ•° - å°±åƒæ˜¯ç¿»è½¬é•œå­
			function toggleMirror() {
				const video = document.getElementById('cameraVideo');
				const mirrorBtn = document.getElementById('mirrorBtn');
				isMirrored = !isMirrored;
				
				if (isMirrored) {
					video.classList.remove('no-mirror');
					mirrorBtn.classList.add('active');
					mirrorBtn.title = 'å–æ¶ˆé•œåƒ';
					console.log('é•œåƒæ¨¡å¼å¼€å¯ï¼ç°åœ¨å°±åƒç…§é•œå­ä¸€æ ·è‡ªç„¶ï½');
				} else {
					video.classList.add('no-mirror');
					mirrorBtn.classList.remove('active');
					mirrorBtn.title = 'å¼€å¯é•œåƒ';
					console.log('é•œåƒæ¨¡å¼å…³é—­ï¼');
				}
			}
			
			// ç»‘å®šäº‹ä»¶ç›‘å¬å™¨ - å°±åƒæ˜¯ç»™æŒ‰é’®è£…ä¸Šå¼€å…³
			document.addEventListener('DOMContentLoaded', function() {
				// å¯åŠ¨æ‘„åƒå¤´æŒ‰é’®
				document.getElementById('startCameraBtn').addEventListener('click', startCamera);
				
				// å…³é—­æŒ‰é’®
				document.getElementById('closeBtn').addEventListener('click', stopCamera);
				
				// æ”¾å¤§/ç¼©å°æŒ‰é’®
				document.getElementById('enlargeBtn').addEventListener('click', toggleEnlarge);
				
				// é•œåƒæŒ‰é’®
				document.getElementById('mirrorBtn').addEventListener('click', toggleMirror);
			});
			
			// é¡µé¢å…³é—­æ—¶æ¸…ç†æ‘„åƒå¤´èµ„æº - å°±åƒæ˜¯æ•´ç†æˆ¿é—´
			window.addEventListener('beforeunload', function() {
				if (cameraStream) {
					cameraStream.getTracks().forEach(track => track.stop());
				}
			});
			
			// åˆå§‹åŒ–reveal.js
			Reveal.initialize({
				hash: true,
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
			
			// å½“é¡µé¢åŠ è½½å®Œæˆåå¯åŠ¨æ˜Ÿæ˜Ÿç‰¹æ•ˆ
			window.addEventListener('load', startStarfall);
		</script>
	</body>
</html>
